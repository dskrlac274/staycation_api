package com.agency04.devcademy.staycation.service;

import com.agency04.devcademy.staycation.model.*;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;

import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.Arrays;
import java.util.Date;

@Service
@EnableAutoConfiguration
public class DataInitService {

    private final UserService userService;
    private final LocationService locationService;
    private final AccommodationService accommodationService;
    private final ImageService imageService;
    private final BookingService bookingService;
    private final PasswordEncoder passwordEncoder;

    public DataInitService(UserService userService, LocationService locationService, AccommodationService accommodationService, ImageService imageService, BookingService bookingService, PasswordEncoder passwordEncoder) {
        this.userService = userService;
        this.locationService = locationService;
        this.accommodationService = accommodationService;
        this.imageService = imageService;
        this.bookingService = bookingService;
        this.passwordEncoder = passwordEncoder;
    }

    public void init() {
        Location location = new Location("Zagreb", "10000", "CRO");
        location = locationService.addLocation(location);
        User user = new User("Ivan", "Horvat", "ivan.horvat@gmail.com", passwordEncoder.encode("ivica123!"), new Date(), location);
        userService.addUser(user);

        Image image = new Image("Jutro", "data:image/jpeg;base64,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");
        imageService.saveImage(image);

        Accommodation valamar = new Accommodation(user, "Valamar", "Hotel", AccommodationType.HOTEL, Arrays.asList(image), 4, BigDecimal.valueOf(50.00), 2, location);
        accommodationService.addAccommodationUnit(valamar);

        Booking booking = new Booking(valamar, 4, LocalDateTime.now(), LocalDateTime.now().plusDays(10), user,"CREATED");
        booking.setStatus("SUBMITTED");
        bookingService.addBooking(booking);
    }
}
